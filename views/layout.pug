doctype html
html
  head
    title= title
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")
    meta(http-equiv="X-UA-Compatible" content="ie=edge")
    meta(name="description" content="Olá, venha conhecer o ambiente digital interativo do Grupo Mave. Tenha todas as informações a um clique. Acesse o link e saiba mais!")
    meta(property="og:title" content="Cartão Digital do Grupo Mave")
    meta(property="og:site_name" content="Grupo Mave Digital")
    meta(property="og:url" content="https://grupomavedigital.com.br")
    meta(property="og:description" content="Olá, venha conhecer o ambiente digital interativo do Grupo Mave. Tenha todas as informações a um clique. Acesse o link e saiba mais!")
    meta(property="og:image" content="https://i.imgur.com/CK5gmRJ.png")
    meta(property="og:type" content="website")
    meta(property="og:updated_time" content="1440432930")
    meta(name="mobile-web-app-capable" content="yes")
    meta(name="theme-color" content="#004a6e")
    meta(name="apple-mobile-web-app-title" content="Grupo Mave Digital")
    meta(name="apple-mobile-web-app-capable" content="yes")
    meta(name="apple-mobile-web-app-status-bar-style" content="#004a6e")
    link(rel="stylesheet" href="/stylesheets/plugins/please-wait.css")
    link(rel="icon" sizes="192x192" href="/favicon/favicon256x256.png")
    link(rel="icon" href="/favicon/favicon256x256.png")
    link(rel="shortcut icon" href="/assets/favicon64x64.ico" type="image/x-icon")
    link(rel="icon" type="image/png" sizes="32x30" href="/favicon/favicon256x256.png")
    link(rel="apple-touch-icon" sizes="128x128" href="/favicon/favicon256x256.png")
    link(rel="apple-touch-startup-image" href="/favicon/favicon256x256.png")
    link(rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons')
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css")
    link(rel="stylesheet" href="https://cdn.plyr.io/3.6.4/plyr.css")
    link(rel="stylesheet" href="/stylesheets/plugins/all.min.css")
    link(rel="stylesheet" href="/stylesheets/plugins/Chart.min.css")
    link(rel="stylesheet" href="/stylesheets/plugins/jquery-ui.min.css")
    link(rel="stylesheet" href="/stylesheets/plugins/jquery-ui.structure.min.css")
    link(rel="stylesheet" href="/stylesheets/plugins/jquery-ui.theme.min.css")
    link(rel="stylesheet" href="/stylesheets/plugins/spinkit.min.css")
    link(rel="stylesheet" href="/stylesheets/layout.min.css")
    block head
      script.
        function onLoad() {
          window.app.loading(true);
        }
  body(onbeforeunload="return onLoad();")
    script(type="text/javascript" src="/javascripts/plugins/please-wait.min.js")
    script.
      window.loading_screen = window.pleaseWait({
        logo: '',
        backgroundColor: 'rgba(0, 0, 0, 0.5)'
        loadingHtml: ` \
          <div id="sk-flex" class="d-flex flex-column mx-3"> \
            <div class="sk-grid align-self-center"> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
              <div class="sk-grid-cube bg-light"></div> \
            </div> \
          </div> \
          <p class='loading-message my-3 text-light'> \
            Carregando... \
          </p> \
          `
      });
    script(src="https://cdn.jsdelivr.net/npm/hls.js")
    script(src="https://cdn.plyr.io/3.6.4/plyr.js")
    script.
      document.addEventListener("DOMContentLoaded", () => {
        const video = document.querySelector("video");
        const source = video.getElementsByTagName("source")[0].src;

        // For more options see: https://github.com/sampotts/plyr/#options
        // captions.update is required for captions to work with hls.js
        const defaultOptions = {
          title: 'Grupo Mave - Facilities',
          captions: {
            active: true,
          },
          tooltips: { controls: true, seek: true },
          storage: { enabled: true, key: 'plyr' },
          seekTime: 5,
          controls: [
            'play-large',
            'restart',
            'rewind',
            'play',
            'fast-forward',
            'progress',
            'current-time',
            'duration',
            'mute',
            'volume',
            'captions',
            'settings',
            'pip',
            'airplay',
            //- 'download',
            'fullscreen',
          ],
          i18n: {
            restart: 'Restartar',
            rewind: 'Rewind {seektime}s',
            play: 'Play',
            pause: 'Pause',
            fastForward: 'Forward {seektime}s',
            seek: 'Seek',
            seekLabel: '{currentTime} of {duration}',
            played: 'Played',
            buffered: 'Buffered',
            currentTime: 'Current time',
            duration: 'Duration',
            volume: 'Volume',
            mute: 'Mute',
            unmute: 'Unmute',
            enableCaptions: 'Enable captions',
            disableCaptions: 'Disable captions',
            download: 'Download',
            enterFullscreen: 'Enter fullscreen',
            exitFullscreen: 'Exit fullscreen',
            frameTitle: 'Player for {title}',
            captions: 'Captions',
            settings: 'Settings',
            pip: 'PIP',
            menuBack: 'Go back to previous menu',
            speed: 'Speed',
            normal: 'Normal',
            quality: 'Quality',
            loop: 'Loop',
            start: 'Start',
            end: 'End',
            all: 'All',
            reset: 'Reset',
            disabled: 'Disabled',
            enabled: 'Enabled',
            advertisement: 'Ad',
            qualityBadge: {
              2160: '4K',
              1440: 'HD',
              1080: 'HD',
              720: 'HD',
              576: 'SD',
              480: 'SD',
            },
            },
            previewThumbnails: { enabled: true, src: "/thumbs/thumb.vtt" }
        };

        if (!Hls.isSupported()) {
          video.src = source
          } else {
            const hls = new Hls()
            hls.loadSource(source)
            hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
              const availableQualities = hls.levels.map((l) => l.height)

              defaultOptions.quality = {
                default: availableQualities[0],
                options: availableQualities,
                forced: true,
                onChange: (e) => updateQuality(e),
              }

              defaultOptions.captions = {
                active: true,
                update: true,
                language: 'pt',
              }
              const player = new Plyr(video, defaultOptions)
              player.on('languagechange', () => {
                setTimeout(() => (hls.subtitleTrack = player.currentTrack), 50)
              })
              hls.attachMedia(video);
              window.hls = hls;
              window.player = player;
            })
            function updateQuality(newQuality) {
              hls.levels.forEach((level, levelIndex) => {
                if (level.height === newQuality) {
                  hls.currentLevel = levelIndex
                }
              })
            }
          }
      });
    div
      header(
        class="navbar navbar-dark bg-mave1 sticky-top flex-md-nowrap p-0 shadow"
      )
        a(class="navbar-brand d-md-flex flex-row col-12 me-0 px-3 disabled")
          img(src="/assets/logo.png" class="img-fluid mt-4 mt-md-0" width="340")
          p(class="text-center fs-3 my-auto flex-fill")
            | Ambiente Digital Interativo
        button(
          class="navbar-toggler position-absolute d-md-none collapsed my-4" type="button"
          data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
          aria-label="Toggle navigation"
        )
          span(class="navbar-toggler-icon")
      div(class="container-fluid")
        div(class="row")
          nav(id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse" style="overflow-x: hidden; overflow-y: auto;")
            div(style="height: 88vh;")
              ul(class="nav flex-column col-12 bg-light bg-gradient")
                each menu in menus
                  li(class="nav-item col-12" role="presentation")
                    if (menu['first'])
                      if (menu['type'] === 'collapse')
                        li(class="nav-item dropdown col-12")
                          a(
                            title=`${menu['title']}`
                            class=`nav-link active dropdown-toggle text-truncate ${menu['enabled'] ? '' : 'text-muted disabled'}`
                            data-bs-toggle="dropdown"
                            role="presentation"
                            aria-expanded="false"
                          )
                            | #[span(data-feather=`${menu['icon'] && menu['enabled'] ? menu['icon'] : 'x-circle'}`)] !{menu['title']}
                          ul(class="dropdown-menu col-12 bg-light bg-gradient border-secondary shadow overflow-auto" style="max-height: 30vh;")
                            each item in menu['items']
                              li(class="nav-item col-12")
                                a(
                                  title=`${item['title']}`
                                  class=`dropdown-item text-truncate ${item['enabled'] ? '' : 'text-muted disabled'}`
                                  onclick=`${item['onclick'] ? `window.app.${item['onclick']}` : ''}`
                                )
                                  | #[span(data-feather=`${item['icon'] && item['enabled'] ? item['icon'] : 'x-circle'}`)] !{item['title']}
                      else
                        li(class="nav-item dropdown col-12")
                          a(
                            title=`${menu['title']}`
                            class=`nav-link active text-truncate ${menu['enabled'] ? '' : 'text-muted disabled'}`
                            aria-current="page"
                            role="presentation"
                            onclick=`${menu['onclick'] ? `window.app.${menu['onclick']}` : ''}`
                          )
                            | #[span(data-feather=`${menu['icon'] && menu['enabled'] ? menu['icon'] : 'x-circle'}`)] !{menu['title']}
                    else
                      if (menu['type'] === 'collapse')
                        li(class="nav-item dropdown col-12")
                          a(
                            title=`${menu['title']}`
                            class=`nav-link dropdown-toggle text-truncate ${menu['enabled'] ? '' : 'text-muted disabled'}`
                            data-bs-toggle="dropdown"
                            role="presentation"
                            aria-expanded="false"
                          )
                            | #[span(data-feather=`${menu['icon'] && menu['enabled'] ? menu['icon'] : 'x-circle'}`)] !{menu['title']}
                          ul(class="dropdown-menu col-12 bg-light bg-gradient border-secondary shadow overflow-auto" style="max-height: 30vh;")
                            each item in menu['items']
                              li(class="nav-item col-12")
                                a(
                                  title=`${item['title']}`
                                  class=`dropdown-item text-truncate ${item['enabled'] ? '' : 'text-muted disabled'}`
                                  onclick=`${item['onclick'] ? `window.app.${item['onclick']}` : ''}`
                                )
                                  | #[span(data-feather=`${item['icon'] && item['enabled'] ? item['icon'] : 'x-circle'}`)] !{item['title']}
                      else
                        li(class="nav-item col-12")
                          a(
                            title=`${menu['title']}`
                            class=`nav-link text-truncate ${menu['enabled'] ? '' : 'text-muted disabled'}`
                            role="presentation"
                            onclick=`${menu['onclick'] ? `window.app.${menu['onclick']}` : ''}`
                          )
                            | #[span(data-feather=`${menu['icon'] && menu['enabled'] ? menu['icon'] : 'x-circle'}`)] !{menu['title']}
          main(class="col-md-9 ms-sm-auto col-lg-10 px-md-4")
            div(class="container-fluid")
              block content
                a(id="buttonToTop" style="z-index: 9999;") #[span(class="material-icons" style="font-size: 2rem;") keyboard_arrow_up]
                script(type="text/javascript" src="/javascripts/plugins/modernizr-custom.js")
                script(src="/javascripts/plugins/jquery-3.5.1.min.js")
                script(src="/javascripts/plugins/jquery-ui.min.js")
                script(src="/javascripts/plugins/jquery.inputmask.min.js")
                script(src="/javascripts/plugins/Chart.min.js")
                script(src="/javascripts/plugins/all.min.js")
                script(src="/javascripts/plugins/lz-string.min.js")
                script(src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous")
                script(src="/javascripts/plugins/bootstrap.min.js")
                script(
                  src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"
                  integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
                  crossorigin="anonymous"
                )
                script(src="/javascripts/layout.min.js")
                script.
                  (function () {
                    'use strict'

                    feather.replace();
                  })();